---
description: 
globs: 
alwaysApply: true
---
# CortexReel Project Guide - Updated 2025-01-15

## Project Overview

CortexReel is a professional React TypeScript SPA designed for film industry professionals to analyze screenplays using AI. The application provides comprehensive 27-section analysis through Google Gemini AI with role-based visualizations for directors, producers, cinematographers, and safety coordinators.

### Key Project Files
- Main application entry: [index.html](mdc:index.html)
- Core React app: [src/App.tsx](mdc:src/App.tsx)  
- Package configuration: [package.json](mdc:package.json)
- Build configuration: [vite.config.ts](mdc:vite.config.ts)
- Memory Bank documentation: [memory-bank/README.md](mdc:memory-bank/README.md)

## ‚úÖ COMPLETED Architecture Patterns

### üéõÔ∏è Admin Dashboard System ‚úÖ COMPLETED (2025-01-15)
The admin dashboard provides professional configuration management through a three-tab Material-UI interface:

**AdminConfigService Pattern - ‚úÖ FULLY IMPLEMENTED:**
- ‚úÖ Centralized configuration management with localStorage persistence
- ‚úÖ TypeScript interfaces: LLMConfig, PromptConfig, AppConfig
- ‚úÖ Prefixed localStorage keys: `cortexreel_admin_config_*`
- ‚úÖ Default configuration fallbacks with professional film industry focus

**Configuration Integration - ‚úÖ COMPLETED:**
- ‚úÖ Admin settings CONNECTED to application behavior
- ‚úÖ LLM model switching IMPLEMENTED in analysis pipeline
- ‚úÖ Feature toggles INTEGRATED across application components
- ‚úÖ Prompt configurations INTEGRATED with analysis service

### üß† Memory Bank System ‚úÖ COMPLETED
**MANDATORY**: Always read ALL memory bank files at start of each session:
- [memory-bank/projectbrief.md](mdc:memory-bank/projectbrief.md) - Project foundation
- [memory-bank/productContext.md](mdc:memory-bank/productContext.md) - Problems solved and value prop
- [memory-bank/systemPatterns.md](mdc:memory-bank/systemPatterns.md) - Technical architecture
- [memory-bank/techContext.md](mdc:memory-bank/techContext.md) - Technology stack
- [memory-bank/activeContext.md](mdc:memory-bank/activeContext.md) - Current work status
- [memory-bank/progress.md](mdc:memory-bank/progress.md) - Implementation tracking

### üîß Service Layer Architecture ‚úÖ COMPLETED
- ‚úÖ **AdminConfigService**: Configuration CRUD operations with localStorage
- ‚úÖ **GeminiService**: AI analysis with multi-model support (Gemini/GPT/Claude)
- ‚úÖ **PDFParserService**: Multi-strategy text extraction (direct + OCR fallback)
- ‚úÖ **AnalysisService**: Orchestration of 27-section analysis pipeline

### üìä Visualization System ‚úÖ COMPLETED
Role-based filtering with 10 major visualization components:
- ‚úÖ OverviewDashboard, SceneVisualization, CharacterVisualization
- ‚úÖ LocationVisualization, EmotionalArcChart, BudgetBreakdown
- ‚úÖ RelationshipNetwork, TechnicalRequirements, SafetyDashboard, ProductionDashboard

## üîÑ Current Development Context (UPDATED 2025-01-15)

### ‚úÖ Recently Completed (2025-01-15)
1. **‚úÖ COMPLETE Admin Dashboard Implementation**
   - Three-tab interface: LLM Config, Prompts Management, App Settings
   - Professional Polish UI with Material-UI components
   - Navigation integration in MainLayout and App.tsx
   - Full localStorage persistence system

2. **‚úÖ COMPLETE Configuration Management System**
   - API key management for multiple LLM providers
   - Editable analysis prompts with version control
   - Feature toggles and application settings
   - Default configurations for six analysis sections

3. **‚úÖ COMPLETE Configuration Integration** 
   - Dynamic LLM model switching in analysis pipeline ‚úÖ WORKING
   - Custom prompts from admin configuration ‚úÖ WORKING
   - Feature toggles across application components ‚úÖ WORKING
   - Configuration validation and error handling ‚úÖ WORKING

### üîÑ Current Priority: Backend Implementation Phase 1
**NEXT IMMEDIATE TASK**: Implement LangChain RAG backend infrastructure
- Set up Docker Compose with MongoDB, Weaviate, Redis
- Implement FastAPI server with job queue management
- Create LangChain-powered analysis pipeline
- Prepare for data migration from localStorage

### ‚ö†Ô∏è Known Issues (Updated)
1. **‚úÖ RESOLVED: Configuration Integration Gap** - Previously reported as issue, now COMPLETED
2. **API Key Security Risk** - Client-side exposure in bundle + localStorage (HIGH PRIORITY for backend)
3. **Client-Side Processing Limitations** - Scalability constraints (addressed in backend phase)

## Development Guidelines

### üéØ Code Standards
- **TypeScript Strict Mode**: 95%+ coverage required
- **Component Pattern**: Atomic Design with Container/Presentational separation
- **Error Handling**: Graceful degradation with user-friendly feedback
- **State Management**: Zustand with selective persistence
- **UI Language**: Polish for user interface, English for code/documentation

### üîß Architecture Decisions
- **‚úÖ COMPLETED: Client-Side Only**: Full frontend implementation complete
- **‚úÖ COMPLETED: localStorage Strategy**: Temporary solution implemented
- **Web Workers**: Background processing for heavy operations
- **Role-Based UI**: Dynamic content filtering based on film industry role
- **Material-UI**: Professional appearance for film industry professionals

### üìù Development Workflow
1. **Always start by reading Memory Bank files** for session context
2. **Check activeContext.md** for current work status and priorities
3. **Follow established patterns** documented in systemPatterns.md
4. **Update Memory Bank** when making significant architectural changes
5. **Prioritize backend implementation** for next phase

### üé¨ Film Industry Focus
- **Target Users**: Directors, producers, cinematographers, safety coordinators
- **Professional Aesthetics**: Dark mode primary, technical precision over speed
- **27-Section Analysis**: Comprehensive screenplay analysis pipeline
- **Export Capabilities**: PDF, CSV, JSON for production workflows

## Integration Points & Current Roadmap

### üîÑ Backend Implementation (CURRENT PRIORITY)
```typescript
// Next implementation: LangChain backend
Docker Compose ‚Üí FastAPI ‚Üí LangChain RAG ‚Üí Vector Database
     ‚Üì              ‚Üì           ‚Üì              ‚Üì
MongoDB+Redis   Job Queue   Semantic Search   Weaviate
```

### üîí Security Migration (High Priority)
- Backend API proxy for secure LLM calls
- Database integration replacing localStorage
- Multi-user configuration management

### üöÄ Advanced Features (Future)
- Real-time collaboration capabilities
- Integration with film production tools
- Mobile application development
- Enterprise security features

## Memory Bank Update Protocol

When significant changes are made:
1. **Update activeContext.md** with current status
2. **Document patterns** in systemPatterns.md if new patterns emerge
3. **Update progress.md** with implementation status
4. **Maintain documentation quality** for session continuity

**Remember**: The Memory Bank is the ONLY source of truth for session continuity. Maintain it with precision and clarity as AI effectiveness depends entirely on its accuracy.

## Emergency Troubleshooting

### Common Issues
- **429 API Errors**: Gemini quota exceeded, implement rate limiting
- **Large PDF Processing**: OCR fallback may take 30+ seconds
- **Memory Usage**: Browser limitations for large analysis results
- **‚úÖ RESOLVED: Configuration Not Applied**: Admin dashboard integration now working

### Quick Fixes
- Clear localStorage: `localStorage.clear()` for fresh start
- Reset admin config: Use reset-to-default functionality in admin dashboard
- Check console errors: Browser dev tools for runtime issues
- Verify API key: Test Gemini API connection in admin panel
